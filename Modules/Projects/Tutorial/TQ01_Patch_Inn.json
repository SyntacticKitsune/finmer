{
	"!Type": "AssetScene",
	"AssetID": "144b2054-982c-4f0a-9755-722e19c1fc20",
	"AssetName": "TQ01_Patch_Inn",
	"IsPatch": true,
	"InjectMode": "InsideAtEnd",
	"InjectTargetScene": "0b23fd11-9316-4796-9eff-d4bba1205ba9",
	"InjectTargetNode": "InnTalkRoot",
	"Root": {
		"NodeType": "Root",
		"Key": "Root",
		"Children": [
			{
				"NodeType": "Choice",
				"Key": "TQ01_Tobias",
				"Title": "Dingo",
				"Tooltip": "The dingo on the bench.",
				"Highlight": false,
				"ButtonWidth": 1.0,
				"ScriptAppear": {
					"!Type": "ScriptDataInline",
					"Script": "return Storage.GetNumber(\"TQ01\") == 1"
				},
				"Children": [
					{
						"NodeType": "State",
						"Key": "TQ01_Tobias_Meet",
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "Log(\"TQ01_MEET\")"
						},
						"Children": [
							{
								"NodeType": "Choice",
								"Key": "TQ01_Continue",
								"Title": "Continue",
								"Tooltip": "Shake paws and introduce yourself.",
								"Highlight": false,
								"ButtonWidth": 1.0,
								"Children": [
									{
										"NodeType": "State",
										"Key": "TQ01_Tobias_Explain",
										"ScriptAction": {
											"!Type": "ScriptDataInline",
											"Script": "Log(\"TQ01_EXPLAIN\")"
										},
										"Children": [
											{
												"NodeType": "Choice",
												"Key": "TQ01_Choice_Friend",
												"Title": "Friend",
												"Tooltip": "Ask about this \"friend\".",
												"Highlight": false,
												"ButtonWidth": 1.0,
												"ScriptAppear": {
													"!Type": "ScriptDataInline",
													"Script": "return not Storage.GetFlag(\"TQ01_DISCUSSED_FRIEND\")"
												},
												"Children": [
													{
														"NodeType": "State",
														"Key": "TQ01_Expo_Friend",
														"ScriptAction": {
															"!Type": "ScriptDataInline",
															"Script": "Log(\"TQ01_INFO_FRIEND\")\r\nStorage.SetFlag(\"TQ01_DISCUSSED_FRIEND\", true)"
														},
														"Children": [
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Reward"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Location"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_End"
															}
														]
													}
												]
											},
											{
												"NodeType": "Choice",
												"Key": "TQ01_Choice_Location",
												"Title": "Location",
												"Tooltip": "Where you might be able to find the thief.",
												"Highlight": false,
												"ButtonWidth": 1.0,
												"ScriptAppear": {
													"!Type": "ScriptDataInline",
													"Script": "return not Storage.GetFlag(\"TQ01_DISCUSSED_LOCATION\")\r\n"
												},
												"Children": [
													{
														"NodeType": "State",
														"Key": "TQ01_Expo_Location",
														"ScriptAction": {
															"!Type": "ScriptDataInline",
															"Script": "Log(\"TQ01_INFO_LOCATION\")\r\nStorage.SetFlag(\"TQ01_DISCUSSED_LOCATION\", true)"
														},
														"Children": [
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Reward"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Friend"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_End"
															}
														]
													}
												]
											},
											{
												"NodeType": "Choice",
												"Key": "TQ01_Choice_Reward",
												"Title": "Reward",
												"Tooltip": "What you can expect for helping out.",
												"Highlight": false,
												"ButtonWidth": 1.0,
												"ScriptAppear": {
													"!Type": "ScriptDataInline",
													"Script": "return not Storage.GetFlag(\"TQ01_DISCUSSED_REWARD\")"
												},
												"Children": [
													{
														"NodeType": "State",
														"Key": "TQ01_Expo_Reward",
														"ScriptAction": {
															"!Type": "ScriptDataInline",
															"Script": "Log(\"TQ01_INFO_REWARD\")\r\nStorage.SetFlag(\"TQ01_DISCUSSED_REWARD\", true)"
														},
														"Children": [
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Location"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_Friend"
															},
															{
																"NodeType": "Link",
																"Key": "AutoLink",
																"LinkTarget": "TQ01_Choice_End"
															}
														]
													}
												]
											},
											{
												"NodeType": "Choice",
												"Key": "TQ01_Choice_End",
												"Title": "Accept",
												"Tooltip": "That should be everything for now.",
												"Highlight": false,
												"ButtonWidth": 1.0,
												"ScriptAppear": {
													"!Type": "ScriptDataInline",
													"Script": "return\r\n    Storage.GetFlag(\"TQ01_DISCUSSED_FRIEND\") and\r\n    Storage.GetFlag(\"TQ01_DISCUSSED_LOCATION\") and\r\n    Storage.GetFlag(\"TQ01_DISCUSSED_REWARD\")"
												},
												"Children": [
													{
														"NodeType": "State",
														"Key": "TQ01_Wrapup",
														"ScriptAction": {
															"!Type": "ScriptDataInline",
															"Script": "Log(\"TQ01_WRAPUP\")\r\nJournal.Update(\"TQ01\", 1)\r\nStorage.SetNumber(\"TQ01\", 2)"
														},
														"Children": [
															{
																"NodeType": "Choice",
																"Key": "TQ01_Tobias1_Goodbye",
																"Title": "Continue",
																"Tooltip": "Tell him you'll get the job done.",
																"Highlight": false,
																"ButtonWidth": 1.0,
																"Children": [
																	{
																		"NodeType": "Link",
																		"LinkTarget": "Main"
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
			},
			{
				"NodeType": "Choice",
				"Key": "TQ01_Tobias_Done",
				"Title": "Tobias",
				"Tooltip": "Report your success to Tobias.",
				"Highlight": false,
				"ButtonWidth": 1.0,
				"ScriptAppear": {
					"!Type": "ScriptDataInline",
					"Script": "return Storage.GetNumber(\"TQ01\") == 3"
				},
				"Children": [
					{
						"NodeType": "State",
						"Key": "TQ01_Toby_Finish",
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "-- Print message\r\nLog(\"TQ01_COMPLETION\")\r\n\r\n-- Prevent player from completing the quest again\r\nStorage.SetNumber(\"TQ01\", 4)\r\n\r\n-- Remove the journal entry and the quest item\r\nJournal.Close(\"TQ01\")\r\nPlayer:TakeItem(\"TQ01_I_Pendant\")\r\n\r\n-- Grant rewards\r\nPlayer:ModifyMoney(55)\r\nPlayer:AwardXP(50)"
						},
						"Children": [
							{
								"NodeType": "Choice",
								"Key": "TQ01_Finale",
								"Title": "Continue",
								"Tooltip": "And that's that!",
								"Highlight": false,
								"ButtonWidth": 1.0,
								"Children": [
									{
										"NodeType": "Link",
										"LinkTarget": "Main"
									}
								]
							}
						]
					}
				]
			}
		]
	}
}