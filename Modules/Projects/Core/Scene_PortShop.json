{
	"!Type": "AssetScene",
	"AssetID": "ec0d5a9b-b88d-4eb0-8c90-2564f8098f22",
	"AssetName": "Scene_PortShop",
	"ScriptEnter": {
		"!Type": "ScriptDataExternal",
		"Name": "Scene_PortShop_Enter"
	},
	"IsPatch": false,
	"Root": {
		"Key": "Root",
		"IsState": false,
		"IsLink": false,
		"Title": "Root",
		"Highlight": false,
		"ButtonWidth": 1.0,
		"Children": [
			{
				"Key": "FirstEntry",
				"IsState": true,
				"IsLink": false,
				"ScriptAction": {
					"!Type": "ScriptDataInline",
					"Script": "Log(\"PORT_SHOP_ENTER_FIRST\")\r\nStorage.SetFlag(\"PORT_SHOP_FIRST\", true)"
				},
				"ScriptAppear": {
					"!Type": "ScriptDataInline",
					"Script": "return not Storage.GetFlag(\"PORT_SHOP_FIRST\")"
				},
				"Children": [
					{
						"IsState": false,
						"IsLink": false,
						"Title": "Continue",
						"Tooltip": "Exchange pleasantries.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "Log(\"PORT_SHOP_ENTER_FIRST2\")"
						},
						"Children": [
							{
								"IsState": true,
								"IsLink": true,
								"LinkTarget": "Main"
							}
						]
					}
				]
			},
			{
				"Key": "Main",
				"IsState": true,
				"IsLink": false,
				"Children": [
					{
						"IsState": false,
						"IsLink": false,
						"Title": "Browse",
						"Tooltip": "Take a look at what's in stock.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "local shop = Shop(\"PortShop\")\r\nshop.Title = \"Pat\"\r\nshop.RestockInterval = 20\r\nif shop.RestockRequired then\r\n    shop:MarkRestocked()\r\n    shop:RemoveDefaultStock()\r\n    shop:AddItem(Item(\"U_FoodBread\"), math.random(1, 3))\r\n    shop:AddItem(Item(\"U_FoodCheese\"), math.random(0, 3))\r\n    shop:AddItem(Item(\"U_FoodGrapes\"), math.random(1, 3))\r\n    shop:AddItem(Item(\"U_PotionHeal1\"), math.random(1, 3))\r\n    shop:AddItem(Item(\"U_PotionDigestResist\"), math.random(0, 2))\r\n    shop:AddItem(Item(\"A_ClothArmor\"), 1)\r\n    shop:AddItem(Item(\"A_LeatherArmor\"), 1)\r\nend\r\nshop:Show()\r\nshop:Save()\r\n\r\n-- Small immersion thing\r\nLog(\"PORT_SHOP_BROWSE\")"
						},
						"Children": [
							{
								"IsState": true,
								"IsLink": true,
								"LinkTarget": "Main"
							}
						]
					},
					{
						"IsState": false,
						"IsLink": false,
						"Title": "Iso",
						"Tooltip": "Ask if he has seen Mayor Iso recently.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAppear": {
							"!Type": "ScriptDataInline",
							"Script": "return not Storage.GetFlag(\"PORT_SHOP_ASK_ISO\")"
						},
						"Children": [
							{
								"Key": "MQ03_R_TalkIso",
								"IsState": true,
								"IsLink": false,
								"ScriptAction": {
									"!Type": "ScriptDataInline",
									"Script": "Storage.SetFlag(\"PORT_SHOP_ASK_ISO\", true)\r\nLog(\"PORT_SHOP_TALK_ISO\")\r\nMQ03_IncrementGossip()"
								},
								"Children": [
									{
										"Key": "MQ03_C_TalkIsoMiss",
										"IsState": false,
										"IsLink": false,
										"Title": "Missing",
										"Tooltip": "Explain that she has disappeared a few days ago.",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"Key": "MQ03_R_TalkIsoMiss",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": {
													"!Type": "ScriptDataInline",
													"Script": "Log(\"PORT_SHOP_TALK_ISO_MISSING\")"
												},
												"Children": [
													{
														"Key": "MQ03_C_TalkIsoEnd",
														"IsState": false,
														"IsLink": false,
														"Highlight": false,
														"ButtonWidth": 1.0,
														"ScriptAction": {
															"!Type": "ScriptDataInline",
															"Script": "Log(\"PORT_SHOP_BROWSE\")"
														},
														"Children": []
													}
												]
											}
										]
									},
									{
										"Key": "MQ03_C_TalkIsoMeet",
										"IsState": false,
										"IsLink": false,
										"Title": "Meeting",
										"Tooltip": "Explain that you were to meet her here.",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"Key": "MQ03_R_TalkIsoMeet",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": {
													"!Type": "ScriptDataInline",
													"Script": "Log(\"PORT_SHOP_TALK_ISO_EXPECT\")"
												},
												"Children": [
													{
														"IsState": false,
														"IsLink": true,
														"LinkTarget": "MQ03_C_TalkIsoEnd"
													}
												]
											}
										]
									}
								]
							}
						]
					},
					{
						"IsState": false,
						"IsLink": false,
						"Title": "Leave",
						"Tooltip": "Time to go.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "SetScene(\"Scene_PortCentral\")"
						},
						"Children": []
					}
				]
			}
		]
	}
}