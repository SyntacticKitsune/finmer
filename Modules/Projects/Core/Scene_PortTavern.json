{
	"!Type": "AssetScene",
	"AssetID": "a7316363-9645-491d-919d-43bf997cc3c7",
	"AssetName": "Scene_PortTavern",
	"ScriptEnter": {
		"!Type": "ScriptDataExternal",
		"Name": "Scene_PortTavern_Enter"
	},
	"IsPatch": false,
	"Root": {
		"NodeType": "Root",
		"Key": "Root",
		"Children": [
			{
				"NodeType": "State",
				"Key": "Main",
				"Children": [
					{
						"NodeType": "Choice",
						"Key": "C_Leave",
						"Title": "Leave",
						"Tooltip": "You've got other places to be.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAction": {
							"!Type": "ScriptDataInline",
							"Script": "SetScene(\"Scene_PortCentral\")"
						},
						"Children": []
					},
					{
						"NodeType": "Choice",
						"Key": "C_Drink",
						"Title": "Drink",
						"Tooltip": "Spend some quiet time.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"Children": [
							{
								"NodeType": "State",
								"Key": "MQ03_EventStart",
								"ScriptAction": {
									"!Type": "ScriptDataInline",
									"Script": "Log(\"MQ03_TAVERN_EVENT1\")\r\nSetInventoryEnabled(false)\r\nStorage.SetFlag(\"MQ03_TAVERN_EVENT\", true)\r\nSetTimeHour(20)"
								},
								"ScriptAppear": {
									"!Type": "ScriptDataInline",
									"Script": "return Storage.GetNumber(\"MQ03_ISO_GOSSIP\") > 0\r\n    and not Storage.GetFlag(\"MQ03_TAVERN_EVENT\")"
								},
								"Children": [
									{
										"NodeType": "Choice",
										"Title": "Continue",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"NodeType": "State",
												"Key": "MQ03_Event2",
												"ScriptAction": {
													"!Type": "ScriptDataInline",
													"Script": "Log(\"MQ03_TAVERN_EVENT2\")"
												},
												"Children": [
													{
														"NodeType": "Choice",
														"Title": "Continue",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"Children": [
															{
																"NodeType": "State",
																"Key": "MQ03_Event3",
																"ScriptAction": {
																	"!Type": "ScriptDataInline",
																	"Script": "Log(\"MQ03_TAVERN_EVENT3\")\r\n\r\n-- Set up context for the pred\r\nMQ03_SetupAssailantContext()"
																},
																"Children": [
																	{
																		"NodeType": "Choice",
																		"Title": "Continue",
																		"Highlight": false,
																		"ButtonWidth": 1.0,
																		"Children": [
																			{
																				"NodeType": "State",
																				"Key": "MQ03_Event4_Eaten",
																				"ScriptAction": {
																					"!Type": "ScriptDataInline",
																					"Script": "Log(\"MQ03_TAVERN_EVENT4_EATEN\")"
																				},
																				"ScriptAppear": {
																					"!Type": "ScriptDataInline",
																					"Script": "-- Player swallowed Sahro during MQ02\r\nreturn Storage.GetFlag(\"MQ02_RANDALL_TIGRESS_EATEN\")"
																				},
																				"Children": [
																					{
																						"NodeType": "Choice",
																						"Key": "MQ03_Event5_C_Why",
																						"Title": "Why",
																						"Tooltip": "Ask what they want with you.",
																						"Highlight": false,
																						"ButtonWidth": 1.0,
																						"Children": [
																							{
																								"NodeType": "State",
																								"Key": "MQ03_Event5_R_Why",
																								"ScriptAction": {
																									"!Type": "ScriptDataInline",
																									"Script": "Log(\"MQ03_TAVERN_EVENT5_WHY\")"
																								},
																								"Children": [
																									{
																										"NodeType": "Choice",
																										"Title": "Continue",
																										"Highlight": false,
																										"ButtonWidth": 1.0,
																										"Children": [
																											{
																												"NodeType": "State",
																												"Key": "MQ03_Event5_R_Why2",
																												"ScriptAction": {
																													"!Type": "ScriptDataInline",
																													"Script": "Log(\"MQ03_TAVERN_EVENT5_WHY2\")"
																												},
																												"Children": [
																													{
																														"NodeType": "Choice",
																														"Key": "MQ03_Event_ToAlley",
																														"Title": "Uh-oh",
																														"Highlight": false,
																														"ButtonWidth": 1.0,
																														"ScriptAction": {
																															"!Type": "ScriptDataInline",
																															"Script": "SetScene(\"Scene_PortTavernAlley\")"
																														},
																														"Children": []
																													}
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					},
																					{
																						"NodeType": "Choice",
																						"Key": "MQ03_Event5_C_Who",
																						"Title": "Who",
																						"Tooltip": "Ask who they are.",
																						"Highlight": false,
																						"ButtonWidth": 1.0,
																						"Children": [
																							{
																								"NodeType": "Link",
																								"LinkTarget": "MQ03_Event5_R_Why"
																							}
																						]
																					},
																					{
																						"NodeType": "Choice",
																						"Key": "MQ03_Event5_C_Resist",
																						"Title": "Resist",
																						"Tooltip": "You're not going down without a fight!",
																						"Highlight": false,
																						"ButtonWidth": 1.0,
																						"Children": [
																							{
																								"NodeType": "State",
																								"Key": "MQ03_Event5_R_Resist",
																								"ScriptAction": {
																									"!Type": "ScriptDataInline",
																									"Script": "Log(\"MQ03_TAVERN_EVENT5_RESIST\")"
																								},
																								"Children": [
																									{
																										"NodeType": "Link",
																										"LinkTarget": "MQ03_Event_ToAlley"
																									}
																								]
																							}
																						]
																					}
																				]
																			},
																			{
																				"NodeType": "State",
																				"Key": "MQ03_Event4_Hit",
																				"ScriptAction": {
																					"!Type": "ScriptDataInline",
																					"Script": "Log(\"MQ03_TAVERN_EVENT4_HIT\")"
																				},
																				"ScriptAppear": {
																					"!Type": "ScriptDataInline",
																					"Script": "-- Player attacked Randall during MQ02, which means\r\n-- Sahro must have been knocked out also.\r\nreturn Storage.GetFlag(\"MQ02_RANDALL_FOUGHT\")"
																				},
																				"Children": [
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Why"
																					},
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Who"
																					},
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Resist"
																					}
																				]
																			},
																			{
																				"NodeType": "State",
																				"Key": "MQ03_Event4_Default",
																				"ScriptAction": {
																					"!Type": "ScriptDataInline",
																					"Script": "Log(\"MQ03_TAVERN_EVENT4_DEFAULT\")"
																				},
																				"Children": [
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Why"
																					},
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Who"
																					},
																					{
																						"NodeType": "Link",
																						"LinkTarget": "MQ03_Event5_C_Resist"
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							},
							{
								"NodeType": "State",
								"Key": "R_Drink_NoEvent",
								"Children": [
									{
										"NodeType": "Choice",
										"Key": "C_DrinkEnd",
										"Title": "Continue",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"NodeType": "Link",
												"LinkTarget": "Main"
											}
										]
									}
								]
							}
						]
					},
					{
						"NodeType": "Choice",
						"Key": "C_Talk",
						"Title": "Talk",
						"Tooltip": "Find someone to chat with.",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"Children": [
							{
								"NodeType": "State",
								"Key": "TavernTalkRoot",
								"Children": [
									{
										"NodeType": "Choice",
										"Title": "Never mind",
										"Highlight": false,
										"ButtonWidth": 0.75,
										"Children": [
											{
												"NodeType": "Link",
												"LinkTarget": "Main"
											}
										]
									}
								]
							}
						]
					}
				]
			}
		]
	}
}